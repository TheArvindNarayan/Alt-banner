(function(f){f.blades=function(c){function ma(a){a.stopImmediatePropagation();r&&clearTimeout(r);0<h?h--:h=N;O(!0)}function na(a){a.stopImmediatePropagation();r&&clearTimeout(r);h<N?h++:h=0;O(!0)}function da(){P=counter=0;if(0===v)Q=setInterval(va,100);else{var a=[],b;R=[];for(b=0;b<w;b++)a[b]=b;for(;0<a.length;)b=Math.floor(Math.random()*a.length),R[R.length]=a[b],a.splice(b,1);Q=setInterval(oa,50)}}function va(){if(P<k){for(var a=ea[P],b=0;b<s;b++)oa(a[b],!0);P++}else clearInterval(Q)}function oa(a, b){var d,c,e,g;!0===b?d=a:d=R[counter];counter<pa?(counter++,c=null):(clearInterval(Q),c=wa);cssObj={width:B,height:C,background:"url('"+x[h]+"') "+j[d].bgX+"px "+j[d].bgY+"px",position:"absolute",left:j[d].xx,top:j[d].yy};e=f("<div />").css(cssObj).appendTo(container);if(2!==y){if(0===y)g="#FFF";else for(g="#"+Math.floor(16777215*Math.random()).toString(16);7!==g.length;)g="#"+Math.floor(16777215*Math.random()).toString(16);f("<div />").css({width:B,height:C,backgroundColor:g}).appendTo(e).fadeOut(500, c)}else e.css("display","none").fadeIn(500,c);0===thumbOn?D[d]=e:E[d]=e}function wa(){if(firstRun)firstRun=!1;else{var a=w;if(1===thumbOn){for(;a--;)D[a].remove();F.remove();F=D=null}else{for(;a--;)E[a].remove();S.remove();S=E=null}}a=w;if(0===thumbOn)for(;a--;)D[a].animate({left:j[a].x,top:j[a].y},200,0!=a?null:qa);else for(;a--;)E[a].animate({left:j[a].x,top:j[a].y},200,0!=a?null:qa)}function qa(){""!==J[h]&&container.css("cursor","pointer").click(ra);T&&(K.click(ma).fadeIn(300),G.click(na).fadeIn(300)); 0!=U[h]?(l=U[h],fa=l.content.length-1,ga=l.align,t=[],g=0,ha()):ia()}function ra(){"parent"===sa?window.location=J[h]:window.open(J[h])}function ha(){var a=l.content[g];if(0===a)g<fa?(g++,ha()):ia();else{var b,d,c=f("<div />").html(a).addClass("cj-info-text").appendTo(container);grabOnce&&(V=parseInt(c.css("padding-left"))+parseInt(c.css("padding-right")),ta=parseInt(c.css("padding-top"))+parseInt(c.css("padding-bottom")),grabOnce=!1);d=c.height()+ta;b=c.width();c.css(l.style[g]).css({left:"left"=== ga?l.position[g].x:L-b-V-l.position[g].x,top:l.position[g].y}).find("a").each(function(){f(this).css(l.style[g])});t[g]=c;g<fa?(g++,a=ha):a=ia;b+=V;"left"===ga?c.css("clip","rect(0px, 0px, "+d+"px, 0px)").animate({zIndex:100},{duration:300,complete:a,step:function(a){c.css({clip:"rect(0px, "+(c.width()+V)*0.01*a+"px, "+d+"px, 0px)"})}}):c.css("clip","rect(0px, "+b+"px, "+d+"px, "+b+"px)").animate({zIndex:100},{duration:300,complete:a,step:function(a){c.css({clip:"rect(0px, "+b+"px, "+d+"px, "+b*(1- 0.01*a)+"px)"})}})}}function ia(){readyToFire=!0;ja&&(isOver||(r=setTimeout(O,ka)))}function xa(){isOver=!0;r&&clearTimeout(r)}function ya(){isOver=!1;readyToFire&&(r=setTimeout(O,ka))}function O(a){readyToFire=!1;container.css("cursor","auto").unbind("click",ra);if(null!=t){for(;t.length;)t[0].stop(),t[0].remove(),t.shift();t=null}T&&(K.stop(!0,!0).css("display","none").unbind("click",ma),G.stop(!0,!0).css("display","none").unbind("click",na));!0!==a&&(h<N?h++:h=0);a=w;if(0===thumbOn)for(;a--;)D[a].animate({left:j[a].xx, top:j[a].yy},300,0!=a?null:ua);else for(;a--;)E[a].animate({left:j[a].xx,top:j[a].yy},300,0!=a?null:ua)}function ua(){0===thumbOn?(thumbOn=1,E=[],S=f("<img />").load(da),S.attr("src",x[h])):(thumbOn=0,D=[],F=f("<img />").load(da),F.attr("src",x[h]))}var F,S,L,M,w,pa,B,C,m,j,E,Q,ka,R,V,ta,t,y,N,K,G,r,ga,fa,g,l,T,ea,k,s,v,ja,b,P,sa,J=[],U=[],x=[];j=[];var D=[],h=0;thumbOn=0;isOver=!1;grabOnce=firstRun=!0;readyToFire=!1;ranColor=c.randomColors;var W,X,Y,la,Z,H,I,n,p,d,e,z,u,$,q,A,aa=[],ba=[],ca=[];u= navigator.userAgent;k=c.cols;s=c.rows;ja=c.autoPlay;L=c.width;M=c.height;b=c.randomizeSlides;m=-c.thumbSpacing;ka=c.slideDelay;T=c.useArrows;sa=c.linkTarget;f("#cj-banner > ul > li").each(function(a){ba[a]=f(this).attr("title");Z=f(this).find("ul");Z.attr("title")?ca[a]=Z.attr("title"):ca[a]="";$=f(this).find("li");$.length?(W=[],X=[],Y=[],$.each(function(a){""!=$.html()?(la=f(this).attr("class").split("x"),W[a]=f(this).html(),X[a]={x:parseInt(la[0]),y:parseInt(la[1])},Y[a]={color:f(this).css("color"), backgroundColor:f(this).css("background-color")}):(W[a]=0,X[a]=0,Y[a]=0)}),aa[a]={content:W,position:X,style:Y,align:Z.attr("class").split("-")[1]}):aa[a]=0});z=ba.length;if(b){q=[];A=[];d=[];for(b=0;b<z;b++)q[b]=ba[b],A[b]=aa[b],d[b]=ca[b];for(;0<q.length;)b=Math.floor(Math.random()*q.length),e=x.length,x[e]=q[b],U[e]=A[b],J[e]=d[b],q.splice(b,1),A.splice(b,1),d.splice(b,1)}else x=ba,U=aa,J=ca;f(document);b=f("#cj-banner").css({width:L,height:M});container=f("<div />").appendTo(b);N=z-1;ja&&-1== u.search("iPhone")&&(-1==u.search("iPad")&&-1==u.search("iPod"))&&container.mouseenter(xa).mouseleave(ya);switch(c.transitionType.toLowerCase()){case "whiteflash":y=v=0;break;case "basicfade":v=0;y=2;break;case "whiteflashrandom":v=1;y=0;break;case "basicfaderandom":v=1;y=2;break;case "colorsrandom":y=v=1}w=k*s;pa=w-1;B=Math.floor(L/k);C=Math.floor(M/s);container.offset();z=(k-1)/2;u=(s-1)/2;1===k%2?(H=Math.floor(k/2),q=!0):q=!1;1===s%2?(I=Math.floor(s/2),A=!0):A=!1;if(0===v){ea=[];numbers=[];for(b= countPlus=iCount=0;b<k;b++){for(d=0;d<s;d++)numbers[numbers.length]=d*k+countPlus;ea[b]=numbers;numbers=[];countPlus++}}for(b=0;b<w;b++)d=b%k,e=Math.floor(b/k),n=B*d,p=C*e,n=q?d!==H?d<H?n+m*(H-d):d>H?n-m*(d-H):n:n:d<z?n+m*(z-d):n-m*(d-z),p=A?e!==I?e<I?p+m*(I-e):e>I?p-m*(e-I):p:p:e<u?p+m*(u-e):p-m*(e-u),j[b]={x:B*d,y:C*e,xx:n,yy:p,bgX:-(B*d),bgY:-(C*e)};T&&(c=c.arrowPadding,K=f("<div />").addClass("cj-left-arrow").appendTo(container),G=f("<div />").addClass("cj-right-arrow").appendTo(container),K.css({display:"none", position:"absolute",left:c,top:M-c-parseInt(K.css("height"))}),G.css({display:"none",position:"absolute",left:L-c-parseInt(G.css("width")),top:M-c-parseInt(G.css("height"))}));F=f("<img />").load(da);F.attr("src",x[0])}})(jQuery);